<!DOCTYPE html>
<html>

    <head>
        <% include ../partials/header.ejs %>
        <style type="text/css">
            .responsiveCal {
                position: relative; padding-bottom: 75%; height: 0; overflow: hidden;
            }
            .responsiveCal iframe {
                position: absolute; top:0; left: 0; width: 100%; height: 100%;
            }
        </style>
    </head>

    <body>

        <% include ../partials/nav.ejs %>

        <main class="home">
            <div class="H(400px) th-hero th-hero--zion">
                <div class="hero-content slds-text-align_center">

                </div>
            </div>
            <div class="content">
                <div class="content-container">
                    <div class="grid-tiles">
                        <div class="slds-text-align_center">
                            <h3 class="th-text--x-large th-text--nexa-rust th-color--navy slds-m-top_xx-large slds-m-bottom_medium">
                                <%= configPage.titulo__c %>
                            </h3>
                            <div class="th-color--navy th-text--medium">
                                <%- configPage.subtitulo__c %>
                            </div>



                            <div id="calendar hidden"></div>
                            <link rel='stylesheet' href='/assets/fullcalendar/fullcalendar.css' />
                            <!--script src='/assets/fullcalendar/lib/jquery.min.js'></script-->
                            <script src='/assets/fullcalendar/lib/moment.min.js'></script>
                            <script src='/assets/fullcalendar/fullcalendar.js'></script>
                            <script src='/assets/fullcalendar/locale-all.js'></script>
                            <script type='text/javascript' src='/assets/fullcalendar/gcal.js'></script>

                            <script type='text/javascript'>

                                $j(function() {
                                    $j('#calendar').fullCalendar({
                                    header: {
                                        left: 'prev,next today',
                                        center: 'title',
                                        right: 'listMonth,month'
                                    },
                                    titleFormat: 'MMMM YYYY',
                                    defaultView: 'month',
                                    displayEventTime: true,
                                    eventClick: function(event) {
                                        window.open(event.url, 'gcalevent', 'width=700,height=600');
                                        return false;
                                    },
                                    eventMouseover: function(event){
                                        console.log(event);
                                    },
                                    googleCalendarApiKey: '<%= process.env.GOOGLE_CALENDAR_API_KEY %>',
                                    eventSources: [
                                        {
                                            googleCalendarId: '<%= process.env.GOOGLE_CALENDAR_ID %>',
                                            className: 'gcal-event'
                                        }/**,
                                        {
                                            googleCalendarId: 'en.usa#holiday@group.v.calendar.google.com',
                                            className: 'nice-event'
                                        }**/
                                    ],
                                    loading: function(bool) {

                                    },
                                    aspectRatio: 2,
                                    locale: 'es'
                                    });
                                });
                                
                            </script>
                        </div>
                        <div class="responsiveCal">
                            <iframe src="<%= process.env.GOOGLE_CALENDAR_IFRAME %>" style="border-width:0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
                                              </div>
                        <div class="tile-grid tiles-container">
                            
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <main class="th-bg--light">
                <div class="content-container">
                    <h2 class="trailhead-section-title hidden">
                        Showing <span class="trailhead-active-items">102</span> trails out of <span class="trailhead-total-items"><%= results.rowCount %></span>
                    </h2>
                    <h2 class="trailhead-section-title hidden">
                        No results matched the selected criteria
                    </h2>
                    <div class="tiles-filterable tiles-container">

                            <% results.rows.forEach(function(r) { %>

                                <div class="<%= r.filtros %> tile-container">
                                    <article class="tile tile-type-trail" data-api-name="<%= r.cardheadericon__c %>" data-content-type="<%= r.tipo__c %>">
                                        <div class="tile-content">
                                            <div class="tile-header" style="background-color: <%= r.cardheaderbgcolor__c %>">
                                                <a title="<%= r.name %>" class="tile-icon" tabindex="-1" aria-hidden="true" href="<%= r.liga__c %>">
                                                    <img alt="<%= r.name %>" class="tile-icon-image" src="/assets/images/trails/<%= r.cardheadericon__c %>">
                                                </a>
                                                <div class="tile-meta-content">
                                                    <!--div class="progress-text">
                                                        <%= r.estatus__c %>
                                                    </div-->
                                                    <div class="progress-text">
                                                        <%= r.fecha__c %>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tile-body">
                                                <div>
                                                    <span class="tile-type">
                                                        <%= r.tipo__c %>
                                                    </span>
                                                </div>
                                                <h3><a title="<%= r.name %>" class="tile-title" href="<%= r.liga__c %>">
                                                    <%= r.name %>
                                                </a></h3>
                                                <div class="tile-description">
                                                    <%= r.descripcioncorta__c %>
                                                </div>
                                                <ul class="tile-tags">
                                                    <% r.rol__c.split(";").forEach(function(r) { %>
                                                    <li data-id="<%= r.id %>">
                                                        <a class="tag" data-filter="rol-<%= r.replace(/ /g , "-") %>" data-genre="<%= r.tipo__c %>" data-type="rol" href="#" role="button">
                                                            <%= r %>
                                                        </a>
                                                    </li>
                                                    <% }); %>
                                                    <% r.tags__c.split(";").forEach(function(r) { %>
                                                    <li data-id="<%= r.id %>">
                                                        <a class="tag" data-filter="tag-<%= r.replace(/ /g , "-") %>" data-genre="<%= r.tipo__c %>" data-type="tag" href="#" role="button">
                                                            <%= r %>
                                                        </a>
                                                    </li>
                                                    <% }); %>
                                                    <% r.nube__c.split(";").forEach(function(r) { %>
                                                    <li data-id="<%= r.id %>">
                                                        <a class="tag" data-filter="nube-<%= r.replace(/ /g , "-") %>" data-genre="<%= r.tipo__c %>" data-type="nube" href="#" role="button">
                                                            <%= r %>
                                                        </a>
                                                    </li>
                                                    <% }); %>
                                                </ul>
                                            </div>
                                        </div>
                                    </article>
                                </div>

                            <% }); %>
                    </div>
                </div>
        </main>
    </body>
</html>